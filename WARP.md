# WARP.md

This file provides guidance to WARP (warp.dev) when working with code in this repository.

## Overview

The Digital Church Guide is a documentation website built with Docusaurus 3.x that provides comprehensive guides, tutorials, API documentation, design system information, templates, and brand guidelines for the Digital Church platform. It's deployed at https://digitalchurch.guide/ and serves as the primary user documentation hub.

## Prerequisites

- Node.js 18+ (specified in package.json engines)
- Yarn (npm package manager alternative)
- Docker & Docker Compose (for containerized development)

## Development Commands

### Core Development
```bash
# Install dependencies
yarn

# Start development server (http://localhost:3000)
yarn start

# Build for production
yarn build

# Serve built site locally
yarn serve

# Clear Docusaurus cache and generated files
yarn clear
```

### Docusaurus-Specific Commands
```bash
# Deploy to GitHub Pages
yarn deploy

# Use SSH for deployment
USE_SSH=true yarn deploy

# Deploy with custom GitHub user
GIT_USER=yourusername yarn deploy

# Generate translations
yarn write-translations

# Generate heading IDs for existing content
yarn write-heading-ids

# Customize Docusaurus components
yarn swizzle
```

### Docker Development
```bash
# Build Docker image
docker build -t digitalchurch-guide .

# Run with Docker Compose (recommended for development)
docker compose up

# Run with custom environment
docker compose up --build
```

## Project Architecture

### Technology Stack
- **Framework**: Docusaurus 3.4.0 (React-based static site generator)
- **Content**: MDX files with React component support
- **Styling**: CSS modules with custom CSS
- **Search**: Algolia DocSearch integration
- **Deployment**: GitHub Pages

### Directory Structure

```
docs/                     # Main documentation content
├── guides/              # User guides and how-to content
├── tutorials/           # Step-by-step tutorials
├── api/                # API documentation
├── design/             # Design system documentation
├── templates/          # Template documentation
└── brand/              # Brand guidelines

src/
├── components/         # Custom React components
├── css/               # Global styles and theme customization
├── pages/             # Custom pages (beyond docs)
└── plugins/           # Custom Docusaurus plugins
    └── webpack-plugin/ # Node.js polyfills for browser

static/                # Static assets (images, files)
└── img/               # Images and icons

blog/                  # Blog posts (currently disabled)
```

### Sidebars Configuration
The site uses autogenerated sidebars based on directory structure:
- `guideSidebar`: Auto-generated from `docs/guides/`
- `tutorialSidebar`: Auto-generated from `docs/tutorials/`
- `apiSidebar`: Auto-generated from `docs/api/`
- `designSidebar`: Auto-generated from `docs/design/`
- `templateSidebar`: Auto-generated from `docs/templates/`
- `brandSidebar`: Auto-generated from `docs/brand/`

### Content Structure
- Each directory can contain `_category_.json` to customize sidebar appearance
- MDX files support frontmatter with `title`, `sidebar_position`, `slug`, etc.
- React components can be imported and used in MDX content
- Images should be placed in `static/img/` and referenced with `/img/` paths

## Key Configuration Files

### webpack Configuration
The project includes custom webpack configuration to support Node.js polyfills in the browser environment:

- `src/plugins/webpack-plugin/index.js`: Main webpack plugin
- `webpack.config.js`: Additional webpack configuration
- These configs provide polyfills for `path`, `crypto`, `stream`, `util`, etc.

### Docusaurus Configuration
`docusaurus.config.js` contains:
- Site metadata (title, URL, favicon)
- Navbar and footer configuration
- Algolia search configuration
- Plugin configuration (image zoom, webpack polyfills)
- Theme customization

### Docker Configuration
- `Dockerfile`: Node 20 slim image with npm start command
- `docker-compose.yml`: Development setup with volume mounting and polling for file changes
- Environment variables: `NODE_ENV=development`, `WATCHPACK_POLLING=true`, `CHOKIDAR_USEPOLLING=true`

## Key Integrations

### Algolia DocSearch
- App ID: `ISLLHGAOWD`
- API Key: `f43d24a36b8c57135d4eb6db616d156c` (public key)
- Index Name: `digitalchurch`
- Search available at `/search`

### Third-Party Components
- **ReactPlayer**: For embedded videos (Vimeo/YouTube)
- **Image Zoom Plugin**: Click-to-zoom functionality for images
- **Intercom**: Customer support chat widget (loaded via `/js/intercom.js`)

### Custom Components
- Homepage features component in `src/components/HomepageFeatures/`
- Custom CSS in `src/css/custom.css` with theme overrides

## Content Development

### Adding New Documentation
1. Create `.mdx` files in appropriate `docs/` subdirectory
2. Add frontmatter with required fields:
   ```yaml
   ---
   title: Page Title
   sidebar_position: 1
   ---
   ```
3. Use React components as needed: `ReactPlayer`, `Tabs`, `TabItem`
4. Place images in `static/img/` and reference with `/img/filename.ext`

### Sidebar Organization
- Directories auto-generate sidebar entries
- Use `_category_.json` to customize directory labels and descriptions
- Set `sidebar_position` in frontmatter to control ordering

## Deployment

### GitHub Pages Deployment
```bash
# Standard deployment
yarn deploy

# With SSH
USE_SSH=true yarn deploy

# With specific GitHub user
GIT_USER=yourusername yarn deploy
```

### Deployment Requirements
- Must have push access to the repository
- Deploys to `gh-pages` branch
- Site builds and deploys automatically
- Available at https://digitalchurch.guide/

### Verification
After deployment:
1. Check that the site loads at the production URL
2. Verify search functionality works
3. Test image zoom and video embeds
4. Confirm all navigation links work correctly

## Development Notes

### Hot Reload
- Development server supports hot reload for content changes
- Component changes may require server restart
- Docker setup includes polling for file system changes

### Debugging
- Use `yarn clear` to reset Docusaurus cache when encountering issues
- Check browser console for webpack polyfill issues
- Algolia search issues can be debugged by setting `debug: true` in config

### Content Guidelines
- All documentation should be in MDX format for React component support
- Use semantic heading structure (H1 for page title, H2 for main sections)
- Include appropriate frontmatter for proper sidebar generation
- Optimize images and place them in `static/img/` directory